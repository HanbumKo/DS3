<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DASH-Sim Manual: generate_traces.py Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="DARPA_logo.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DASH-Sim Manual
   </div>
   <div id="projectbrief">Domain-Focused Advanced Software-Reconfigurable Heterogenous SoC Simulator</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('generate__traces_8py_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">generate_traces.py</div>  </div>
</div><!--header-->
<div class="contents">
<a href="generate__traces_8py.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno"><a class="line" href="namespacegenerate__traces.html">    1</a></span>&#160;<span class="stringliteral">&#39;&#39;&#39;!</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="stringliteral">@brief This file contains the script to generate the traces of several configurations at once.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="stringliteral">This file is mainly used to create the dataset for the DTPM policies (first step).</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="stringliteral">The configurations for the trace generation can be configured in this file, including the frequencies/num_cores to be evaluated.</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="stringliteral">These configurations must match the SoC file defined in the config_file.ini.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="stringliteral">This script generates all possible combinations for the provided SoC configurations, for instance, each frequency point of the big cluster will be evaluated with all frequency points of the LITTLE cluster.</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160; </div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keyword">import</span> os</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keyword">import</span> sys</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="keyword">import</span> fnmatch</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="keyword">import</span> csv</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="keyword">import</span> time</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="keyword">from</span> shutil <span class="keyword">import</span> copyfile</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160; </div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="keyword">import</span> common</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">import</span> DASH_Sim_utils</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">import</span> configparser</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">import</span> DASH_SoC_parser</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">import</span> DTPM_utils</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"># Test ondemand, performance, and powersave results</span></div>
<div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="namespacegenerate__traces.html#ab70194657af70883bcbf9e1e40468817">   25</a></span>&#160;test_individual_configs = <span class="keyword">False</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"># Define the DVFS modes to generate the traces</span></div>
<div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="namespacegenerate__traces.html#ab3b88a8ff26eacdc549517905d6872b4">   27</a></span>&#160;heterogeneous_PEs = <span class="keyword">True</span></div>
<div class="line"><a name="l00028"></a><span class="lineno"><a class="line" href="namespacegenerate__traces.html#aaf44f9c387b561c75ce9189b9a8b7dd6">   28</a></span>&#160;SoC_file = <span class="stringliteral">&quot;MULTIPLE_BAL_SMALL&quot;</span> <span class="comment"># MULTIPLE_BAL_SMALL, MULTIPLE_BAL</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160; </div>
<div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="namespacegenerate__traces.html#aa576ec267e22b3bec154b54038bc2a6c">   30</a></span>&#160;N_jobs = 10 <span class="comment"># Snippet_size</span></div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="namespacegenerate__traces.html#aece3c5348c3c59666815ef6b73196cb6">   31</a></span>&#160;N_applications = 5 <span class="comment"># Must match the applications provided in job_file of config_file.ini</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="keywordflow">if</span> <span class="keywordflow">not</span> heterogeneous_PEs:</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="comment"># Homogenerous mode</span></div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="namespacegenerate__traces.html#a968129f90d9a9ccff728289d7cb9b807">   35</a></span>&#160;    DVFS_modes = [<span class="stringliteral">&#39;constant-2000&#39;</span>,</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;                  <span class="comment"># &#39;constant-1900&#39;,</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;                  <span class="stringliteral">&#39;constant-1800&#39;</span>,</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                  <span class="comment"># &#39;constant-1700&#39;,</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;                  <span class="stringliteral">&#39;constant-1600&#39;</span>,</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;                  <span class="comment"># &#39;constant-1500&#39;,</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                  <span class="stringliteral">&#39;constant-1400&#39;</span>,</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;                  <span class="comment"># &#39;constant-1300&#39;,</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;                  <span class="stringliteral">&#39;constant-1200&#39;</span>,</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;                  <span class="comment"># &#39;constant-1100&#39;,</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;                  <span class="stringliteral">&#39;constant-1000&#39;</span>,</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                  <span class="stringliteral">&#39;constant-800&#39;</span>,</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;                  <span class="stringliteral">&#39;constant-600&#39;</span>  <span class="comment"># ,</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                  <span class="comment"># &#39;constant-400&#39;,</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                  <span class="comment"># &#39;constant-200&#39;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                  ]</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="comment"># Heterogeneous mode</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordflow">if</span> SoC_file == <span class="stringliteral">&quot;MULTIPLE_BAL_SMALL&quot;</span>:</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        DVFS_modes = [</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;            [<span class="stringliteral">&#39;constant-1400&#39;</span>, <span class="stringliteral">&#39;constant-1200&#39;</span>, <span class="stringliteral">&#39;constant-1000&#39;</span>, <span class="stringliteral">&#39;constant-800&#39;</span>, <span class="stringliteral">&#39;constant-600&#39;</span>],  <span class="comment"># 0 (LTL)</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;            [<span class="stringliteral">&#39;constant-2000&#39;</span>, <span class="stringliteral">&#39;constant-1800&#39;</span>, <span class="stringliteral">&#39;constant-1600&#39;</span>, <span class="stringliteral">&#39;constant-1400&#39;</span>, <span class="stringliteral">&#39;constant-1200&#39;</span>, <span class="stringliteral">&#39;constant-1000&#39;</span>, <span class="stringliteral">&#39;constant-800&#39;</span>, <span class="stringliteral">&#39;constant-600&#39;</span>]  <span class="comment"># 1 (BIG)</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        ]</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordflow">elif</span> SoC_file == <span class="stringliteral">&quot;MULTIPLE_BAL&quot;</span>:</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        DVFS_modes = [</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;            [<span class="stringliteral">&#39;constant-1400&#39;</span>, <span class="stringliteral">&#39;constant-1200&#39;</span>, <span class="stringliteral">&#39;constant-1000&#39;</span>, <span class="stringliteral">&#39;constant-800&#39;</span>, <span class="stringliteral">&#39;constant-600&#39;</span>],  <span class="comment"># 0 (LTL)</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;            [<span class="stringliteral">&#39;constant-2000&#39;</span>, <span class="stringliteral">&#39;constant-1800&#39;</span>, <span class="stringliteral">&#39;constant-1600&#39;</span>, <span class="stringliteral">&#39;constant-1400&#39;</span>, <span class="stringliteral">&#39;constant-1200&#39;</span>, <span class="stringliteral">&#39;constant-1000&#39;</span>, <span class="stringliteral">&#39;constant-800&#39;</span>, <span class="stringliteral">&#39;constant-600&#39;</span>],  <span class="comment"># 1 (BIG)</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;            [<span class="stringliteral">&#39;performance&#39;</span>],  <span class="comment"># 2 (Scrambler)</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;            [<span class="stringliteral">&#39;performance&#39;</span>],  <span class="comment"># 3 (Scrambler)</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;            [<span class="stringliteral">&#39;performance&#39;</span>],  <span class="comment"># 4 (FFT)</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;            [<span class="stringliteral">&#39;performance&#39;</span>],  <span class="comment"># 5 (FFT)</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;            [<span class="stringliteral">&#39;performance&#39;</span>],  <span class="comment"># 6 (FFT)</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;            [<span class="stringliteral">&#39;performance&#39;</span>],  <span class="comment"># 7 (FFT)</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;            [<span class="stringliteral">&#39;performance&#39;</span>],  <span class="comment"># 8 (Viterbi)</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;            [<span class="stringliteral">&#39;performance&#39;</span>]   <span class="comment"># 9 (Viterbi)</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        ]</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        print(<span class="stringliteral">&quot;[E] SoC config not found&quot;</span>)</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        sys.exit()</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="namespacegenerate__traces.html#a23d3971757efaf8d3cb506f192073dac">   75</a></span>&#160;N_little_list   = [1, 2, 3, 4]</div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="namespacegenerate__traces.html#a40f468a4f3ccc7044388aa878b0b528c">   76</a></span>&#160;N_big_list      = [1, 2, 3, 4]</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="namespacegenerate__traces.html#a65aff0db67aaa75b630a9c9b2330a5d5">   78</a></span>&#160;resource_matrix = <a class="code" href="classcommon_1_1_resource_manager.html">common.ResourceManager</a>()  <span class="comment"># This line generates an empty resource matrix</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="namespacegenerate__traces.html#aba243fb6487915af57184a96c1239e4f">   80</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespacegenerate__traces.html#aba243fb6487915af57184a96c1239e4f">main</a>():</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    start_time = time.time()</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <a class="code" href="namespace_d_a_s_h___sim__utils.html#a46338263611a823e53ba1f06a234be9d">DASH_Sim_utils.clean_traces</a>()</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="comment"># Parse the resource file</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    config = configparser.ConfigParser()</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    config.read(<span class="stringliteral">&#39;config_file.ini&#39;</span>)</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    resource_file = <span class="stringliteral">&quot;config_SoC/&quot;</span> + config[<span class="stringliteral">&#39;DEFAULT&#39;</span>][<span class="stringliteral">&#39;resource_file&#39;</span>]</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="comment"># Update the number os PEs in the common.py file</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <a class="code" href="namespace_d_a_s_h___so_c__parser.html#a57cccf10cbc361fd50b050c1dc8dc820">DASH_SoC_parser.resource_parse</a>(resource_matrix, resource_file)  <span class="comment"># Parse the input configuration file to populate the resource matrix</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="comment"># Run all possible combinations among the frequency points that were generated</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="namespace_d_t_p_m__utils.html#a3c794b8a9df741fee23a0173d1767bb0">DTPM_utils.run_parallel_sims</a>(DVFS_modes, N_little_list, N_big_list, N_jobs, N_applications, heterogeneous_PEs)</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="comment"># Create configuration lists (all PEs have the same DVFS mode) and run the simulator</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">if</span> test_individual_configs:</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        cfg = [<span class="stringliteral">&#39;ondemand&#39;</span>, <span class="stringliteral">&#39;performance&#39;</span>, <span class="stringliteral">&#39;powersave&#39;</span>]</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        job_config = [[2, 2, 2, 2, 2]]</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        sim_ID = -1</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="keywordflow">for</span> c <span class="keywordflow">in</span> cfg:</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            DVFS_cfg_list = []</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(common.num_PEs_TRACE):</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                DVFS_cfg_list.append(c)</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            <span class="keywordflow">for</span> N_little <span class="keywordflow">in</span> N_little_list:</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                <span class="keywordflow">for</span> N_big <span class="keywordflow">in</span> N_big_list:</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                    config_list = (sim_ID, DVFS_cfg_list, job_config, N_little, N_big, common.num_PEs_TRACE)</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                    sim_ID -= 1</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                    <a class="code" href="namespace_d_t_p_m__utils.html#a697a0f6bcf116bd0335f8bb2fc10c925">DTPM_utils.run_sim_initial_dataset</a>(config_list)</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="comment"># Merge and delete temp csv files - System</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">for</span> trace_name <span class="keywordflow">in</span> DASH_Sim_utils.trace_list:</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        print(<span class="stringliteral">&quot;Trace name:&quot;</span>, trace_name)</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        data = set()</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <span class="keywordflow">if</span> os.path.exists(trace_name):</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            os.remove(trace_name)</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        file_list = fnmatch.filter(os.listdir(<span class="stringliteral">&#39;.&#39;</span>), trace_name.split(<span class="stringliteral">&quot;.&quot;</span>)[0] + <span class="stringliteral">&#39;__*.csv&#39;</span>)</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="keywordflow">if</span> len(file_list) &gt; 0:</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            <span class="keywordflow">for</span> i, file <span class="keywordflow">in</span> enumerate(file_list):</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                print(<span class="stringliteral">&quot;\tFile name:&quot;</span>, file)</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                <span class="keywordflow">if</span> i == 0:</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                    <span class="keyword">with</span> open(file, <span class="stringliteral">&quot;r&quot;</span>) <span class="keyword">as</span> f:</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                        reader = csv.reader(f)</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                        header = next(reader)</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                    <span class="keyword">with</span> open(trace_name, <span class="stringliteral">&#39;w&#39;</span>, newline=<span class="stringliteral">&#39;&#39;</span>) <span class="keyword">as</span> csvfile:</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                        wr = csv.writer(csvfile, delimiter=<span class="stringliteral">&#39;,&#39;</span>)</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                        wr.writerow(header)</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                <span class="keywordflow">for</span> i, chunk <span class="keywordflow">in</span> enumerate(pd.read_csv(file, chunksize=1000000, iterator=<span class="keyword">True</span>)):</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                    print(<span class="stringliteral">&quot;\t\tLoading chunk {}...&quot;</span>.format(i))</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                    data.update(set(chunk.itertuples(index=<span class="keyword">False</span>, name=<span class="keywordtype">None</span>)))</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                os.remove(file)</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            <span class="keyword">with</span> open(trace_name, <span class="stringliteral">&#39;a&#39;</span>, newline=<span class="stringliteral">&#39;&#39;</span>) <span class="keyword">as</span> csvfile:</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                file_out = csv.writer(csvfile, delimiter=<span class="stringliteral">&#39;,&#39;</span>)</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                <span class="keywordflow">for</span> line <span class="keywordflow">in</span> data:</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                    file_out.writerow(list(line))</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    copyfile(common.DATASET_FILE_DTPM, common.DATASET_FILE_DTPM.split(<span class="stringliteral">&#39;.&#39;</span>)[0] + <span class="stringliteral">&quot; - Initial.csv&quot;</span>)</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    sim_time = float(float(time.time() - start_time)) / 60.0</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    print(<span class="stringliteral">&quot;--- {:.2f} minutes ---&quot;</span>.format(sim_time))</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="keywordflow">if</span> __name__ == <span class="stringliteral">&#39;__main__&#39;</span>:</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="namespacegenerate__traces.html#aba243fb6487915af57184a96c1239e4f">main</a>()</div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="anamespace_d_a_s_h___sim__utils_html_a46338263611a823e53ba1f06a234be9d"><div class="ttname"><a href="namespace_d_a_s_h___sim__utils.html#a46338263611a823e53ba1f06a234be9d">DASH_Sim_utils.clean_traces</a></div><div class="ttdeci">def clean_traces()</div><div class="ttdoc">Remove old trace files.</div><div class="ttdef"><b>Definition:</b> <a href="_d_a_s_h___sim__utils_8py_source.html#l00335">DASH_Sim_utils.py:335</a></div></div>
<div class="ttc" id="anamespacegenerate__traces_html_aba243fb6487915af57184a96c1239e4f"><div class="ttname"><a href="namespacegenerate__traces.html#aba243fb6487915af57184a96c1239e4f">generate_traces.main</a></div><div class="ttdeci">def main()</div><div class="ttdef"><b>Definition:</b> <a href="generate__traces_8py_source.html#l00080">generate_traces.py:80</a></div></div>
<div class="ttc" id="anamespace_d_t_p_m__utils_html_a697a0f6bcf116bd0335f8bb2fc10c925"><div class="ttname"><a href="namespace_d_t_p_m__utils.html#a697a0f6bcf116bd0335f8bb2fc10c925">DTPM_utils.run_sim_initial_dataset</a></div><div class="ttdeci">def run_sim_initial_dataset(sim_params)</div><div class="ttdoc">Call the simulator with specific parameters in order to generate the dataset that will be used for th...</div><div class="ttdef"><b>Definition:</b> <a href="_d_t_p_m__utils_8py_source.html#l00026">DTPM_utils.py:26</a></div></div>
<div class="ttc" id="anamespace_d_t_p_m__utils_html_a3c794b8a9df741fee23a0173d1767bb0"><div class="ttname"><a href="namespace_d_t_p_m__utils.html#a3c794b8a9df741fee23a0173d1767bb0">DTPM_utils.run_parallel_sims</a></div><div class="ttdeci">def run_parallel_sims(DVFS_config_list, N_little_list, N_big_list, N_jobs, N_applications, heterogeneous_PEs=False)</div><div class="ttdoc">Run all possible combinations for the provided frequency points in parallel.</div><div class="ttdef"><b>Definition:</b> <a href="_d_t_p_m__utils_8py_source.html#l00057">DTPM_utils.py:57</a></div></div>
<div class="ttc" id="aclasscommon_1_1_resource_manager_html"><div class="ttname"><a href="classcommon_1_1_resource_manager.html">common.ResourceManager</a></div><div class="ttdoc">Define the ResourceManager class to maintain the list of the resource in our DASH-SoC model.</div><div class="ttdef"><b>Definition:</b> <a href="common_8py_source.html#l00333">common.py:333</a></div></div>
<div class="ttc" id="anamespace_d_a_s_h___so_c__parser_html_a57cccf10cbc361fd50b050c1dc8dc820"><div class="ttname"><a href="namespace_d_a_s_h___so_c__parser.html#a57cccf10cbc361fd50b050c1dc8dc820">DASH_SoC_parser.resource_parse</a></div><div class="ttdeci">def resource_parse(resource_matrix, file_name)</div><div class="ttdoc">Read and parse the SoC configuration.</div><div class="ttdef"><b>Definition:</b> <a href="_d_a_s_h___so_c__parser_8py_source.html#l00012">DASH_SoC_parser.py:12</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="generate__traces_8py.html">generate_traces.py</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
