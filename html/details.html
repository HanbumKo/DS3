<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DS3 Manual: DS3 in Depth</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="DARPA_logo.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DS3 Manual
   </div>
   <div id="projectbrief">DS3: A System-Level Domain-Specific System-on-ChipSimulationFramework</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('details.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">DS3 in Depth </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#config">Configuring DS3</a></li>
<li class="level1"><a href="#soc">SoC configuration file</a></li>
<li class="level1"><a href="#application">Application configuration file</a></li>
<li class="level1"><a href="#scheduler">Built-in schedulers</a></li>
<li class="level1"><a href="#dtpm">Built-in DTPM policies</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="config"></a>
Configuring DS3</h1>
<p>DS3 configured via <a class="el" href="config__file_8ini.html">config_file.ini</a>. The file is composed of six sections:</p><ul>
<li><em>DEFAULT</em> is the section where all main parameters for a simulation are assigned. <br  />
 To run a simulation:<ol type="1">
<li>an <a class="el" href="details.html#soc">SoC configuration file</a>,</li>
<li>an <a class="el" href="details.html#application">Application configuration file</a> or <b>application configuration files</b>, and</li>
<li>a <b>scheduler</b> must be defined.</li>
</ol>
</li>
<li><em>HEFT SCHEDULER</em> is the section where all HEFT related parameters are assigned.</li>
<li><em>IL SCHEDULER</em> is the section where all Imitation Learning based (IL) scheduler parameters are assigned.</li>
<li><em>TRACE</em> is the section where all parameters related to tracing are assigned.</li>
<li><em>POWER MANAGEMENT</em> is the section where analytical power and temperature model parameters are assigned.</li>
<li><em>SIMULATION MODE</em> is the section where simulation mode is defined and related parameters are assigned.</li>
<li><em>COMMUNICATION MODE</em> is the section where communication mode is defined and related parameters are assigned.</li>
<li><em>DEBUG</em> is the section where various debug messages can be enabled and/or disabled.</li>
<li><em>INFO</em> is the section where various information messages can be enabled and/or disabled.</li>
</ul>
<h1><a class="anchor" id="soc"></a>
SoC configuration file</h1>
<p>DS3 enables instantiating a wide range of SoC configurations with different types of general- and special purpose processing elements (PEs) via an SoC configuration file. <br  />
A list of PEs and its characteristics are provided in the file are stored in the resource database</p>
<a class="anchor" id="resource database"></a>
<table class="doxtable">
<caption>List of PE attributes in resource database</caption>
<tr>
<th>Attribute </th><th>Description </th></tr>
<tr>
<td>Type </td><td>Defines type of PE, Example: CPU, accelerator etc. </td></tr>
<tr>
<td>Capacity </td><td>Number of simultaneous threads a PE can execute </td></tr>
<tr>
<td>DVFS policy </td><td>Policy which controls PE frequency and voltage at runtime </td></tr>
<tr>
<td>Operating performance point </td><td>Operating frequencies and corresponding voltages for a PE </td></tr>
<tr>
<td>Execution time profile </td><td>Defines the execution time of supported tasks on each PE </td></tr>
<tr>
<td>Power consumption profile </td><td>Provides the power consumption profile of each PE </td></tr>
</table>
<p>The configuration file is in a text format and the structure is given below.</p>
<div class="fragment"><div class="line"><span class="comment"># Configuration file of the Resources available in DASH-SoC</span></div>
<div class="line"><span class="comment"># Lines that start with &quot;#&quot; are comments</span></div>
<div class="line"> </div>
<div class="line"><span class="comment"># Add a new resource using the keyword: add_new_resource</span></div>
<div class="line"><span class="comment"># Always add MEMORY last as a special resource, which will be used for communication </span></div>
<div class="line"><span class="comment"># and does not support any functionality</span></div>
<div class="line"><span class="comment"># The following lines must have the attributes below</span></div>
<div class="line"><span class="comment"># The format: add_new_resource $resource_type (string)  $resource_name (string) $resource_id (int) $capacity (int) $num_of_supported_functionality (int) $DVFS_mode (string)</span></div>
<div class="line"><span class="comment">#             $functionality_name (string) $execution_time (float)</span></div>
<div class="line"><span class="comment"># Note: for type, use the following abbreviations</span></div>
<div class="line"><span class="comment">#       central processing unit --&gt; CPU</span></div>
<div class="line"><span class="comment">#       Arm LITTLE cluster      --&gt; LTL</span></div>
<div class="line"><span class="comment">#       Arm big cluster         --&gt; BIG</span></div>
<div class="line"><span class="comment">#       accelerator             --&gt; ACC</span></div>
<div class="line"><span class="comment">#       memory                  --&gt; MEM</span></div>
<div class="line"><span class="comment">#</span></div>
<div class="line"><span class="comment"># opp $frequency (int - MHz) $voltage (int - mV), defines the Operating Performance Points (OPPs) with frequency and voltage tuples</span></div>
<div class="line"><span class="comment">#</span></div>
<div class="line"><span class="comment"># trip_freq $trip_1 $trip_2 $trip_3 ..., defines the frequencies that are set at each trip point if throttling is enabled. &quot;-1&quot; means that the frequency is not modified</span></div>
<div class="line"><span class="comment">#</span></div>
<div class="line"><span class="comment"># power_profile $frequency $power_1 $power_2 $power_3 ... $power_max_capacity</span></div>
<div class="line"><span class="comment"># e.g., power_profile 1000 0.19 0.29 0.35 0.40. At 1GHz, the power for 1 core is 0.19W, 2 cores is 0.29W, and so on.</span></div>
<div class="line"><span class="comment">#</span></div>
<div class="line"><span class="comment"># PG_profile $frequency $power_1 $power_2 $power_3 ... $power_max_capacity</span></div>
<div class="line"><span class="comment">#</span></div>
<div class="line"><span class="comment"># Example: The following lines add a new CPU with name=P1, ID=0, capacity=1 and</span></div>
<div class="line"><span class="comment">#          that can run 3 different tasks using &quot;performance&quot; DVFS mode</span></div>
<div class="line"><span class="comment">#</span></div>
<div class="line"><span class="comment">#          add_new_resource resource_type CPU resource_name P1 resource_ID 0 capacity 1 num_supported_functionalities 3 DVFS_mode performance</span></div>
<div class="line"><span class="comment">#          opp 1000 1150</span></div>
<div class="line"><span class="comment">#          trip_freq -1 -1 -1</span></div>
<div class="line"><span class="comment">#          power_profile 1000 0.1</span></div>
<div class="line"><span class="comment">#          PG_profile 1000 0.1</span></div>
<div class="line"><span class="comment">#          scrambler 12</span></div>
<div class="line"><span class="comment">#          reed_solomon_encoder 15</span></div>
<div class="line"><span class="comment">#          bpsk_modulation 18</span></div>
<div class="line"><span class="comment">#</span></div>
<div class="line"><span class="comment"># After adding resources, use keyword comm_band to add communication bandwidth </span></div>
<div class="line"><span class="comment"># between resources</span></div>
<div class="line"><span class="comment"># The format: comm_band $source_id (int) $destination_id (int) bandwidth (int)</span></div>
<div class="line"><span class="comment"># Example: The following line adds communication bandwidth between resource 0 (source)</span></div>
<div class="line"><span class="comment">#          and resource 1 (destination)</span></div>
<div class="line"><span class="comment">#                    </span></div>
<div class="line"><span class="comment">#          comm_band 0 1 5</span></div>
</div><!-- fragment --><p>To see an example of an SoC configuration file please see one of the <b>SoC.XXX.txt</b> files</p>
<h1><a class="anchor" id="application"></a>
Application configuration file</h1>
<p>In DS3, applications are modeled as a directed acyclic graph (DAG). In the graph nodes represent a task and edges shows data dependency between the tasks.<br  />
For example, the left of the figure below depicts the block diagrams of WiFi transmitter (WiFi-TX) and receiver (WiFi-RX) applications. On the right, however, <br  />
the corresponding DAGs for these two applications used in DS3 presented. These reference design of WiFi-TX and WiFi-RX applcaitions contain five parallel <br  />
chains of tasks as seen in the figure below.</p>
<div class="image">
<img src="WiFi_BD_and_DAG.png" alt="" width="55%" height="55%"/>
<div class="caption">
(a) Block diagrams and (b) DAGs for WiFi-TX and WiFi-RX applications. </div></div>
<p>The configuration file is in a text format and the structure is given below.</p>
<div class="fragment"><div class="line"><span class="comment"># Configuration file of the Temporal Mitigation</span></div>
<div class="line"><span class="comment"># Lines that start with &quot;#&quot; are comments</span></div>
<div class="line"><span class="comment"># Start with specifying the job name with keyword: job_name</span></div>
<div class="line"><span class="comment"># Then, in the next line, add tasks using the keyword: add_new_tasks</span></div>
<div class="line"><span class="comment"># After that the following three lines must have the attributes below</span></div>
<div class="line"><span class="comment"># $task_name (string) $task_id (int) $task_predecessors (list)</span></div>
<div class="line"><span class="comment"># $task_name (string) HEAD (TAIL), if the task is the head or tail of the task graph</span></div>
<div class="line"><span class="comment"># $task_name (string) $earliest_start (int) $deadline (int) $input_vol (int - bits) $output_vol (int - bits)</span></div>
<div class="line"><span class="comment"># The format: add_new_tasks $num_of_tasks (int)</span></div>
<div class="line"><span class="comment">#             $task_name (string) $task_id (int) $task_predecessors (list)</span></div>
<div class="line"><span class="comment">#             $task_name (string) HEAD (string)</span></div>
<div class="line"><span class="comment">#             $task_name (string) $earliest_start (int) $deadline (int) $input_vol (int) $output_vol (int)</span></div>
<div class="line"><span class="comment"># Example: The following lines add a new task with ID=0, and</span></div>
<div class="line"><span class="comment">#          there is no predecessor for this task</span></div>
<div class="line"><span class="comment">#          (empty list means there is no dependency)</span></div>
<div class="line"><span class="comment">#          This task is the head of the task graph</span></div>
<div class="line"><span class="comment">#          earliest start time and deadline are 0 and 10, respectively</span></div>
<div class="line"><span class="comment">#          input and output volumes are 1024 bits</span></div>
<div class="line"><span class="comment">#</span></div>
<div class="line"><span class="comment">#          add_new_tasks 1</span></div>
<div class="line"><span class="comment">#          scrambler 0</span></div>
<div class="line"><span class="comment">#          scrambler HEAD</span></div>
<div class="line"><span class="comment">#          scrambler earliest_start 0 deadline 10 input_vol 1024 output_vol 1024</span></div>
</div><!-- fragment --><p>To see an example of an Application configuration file please see one of the <b>job_XXX.txt</b> files</p>
<h1><a class="anchor" id="scheduler"></a>
Built-in schedulers</h1>
<p>DS3 facilitates plug-and-play simulation of scheduling algorithms; it also incorporates built-in heuristic and table-based schedulers to aid developers and <br  />
provide a baseline for users. DS3 also includes power dissipation and thermal models that enable users to design and evaluate new dynamic thermal and power <br  />
 management (DTPM) policies. The latter, however, will be discussed in another section.</p>
<p>Some of the scheduling algorithms are:</p><ul>
<li><b>Minimum Execution Time (MET) scheduler</b> assigns a ready task to a PE that achieves the minimum expected execution time following a FIFO policy (<a href="http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.25.4721&amp;rep=rep1&amp;type=pdf">T. D. Braun et al.</a>).</li>
<li><b>Earliest Task First (ETF) scheduler</b> utilizes the information about the communication cost between tasks and the current status of all PEs to make a scheduling decision (<a href="https://ieeexplore.ieee.org/abstract/document/1558639">J. Blythe et al.</a>).<br  />
 Consider a set of PEs \( P = \{p_0, p_1, ..., p_{q-1}\} \) and a task graph with tasks \(N = \left\{n_0, n_1, ..., n_{k-1}\right\}\). For every task and PE pair, we define the following quantities:<ul>
<li><em>Estimated Execution Time, EET(n; p)</em>, is the total amount of time that the resource <em>p</em> takes to run the task <em>n</em>.</li>
<li><em>Estimated Availability Time, EAT(n; p)</em>, is defined as the time when the resource <em>p</em> will finish executing all tasks in its queue before the task <em>n</em>.</li>
<li><em>Data Availability Time, DAT(n; p)</em>, is the earliest time at which all required data becomes available at resource <em>p</em> to perform task <em>n</em>.</li>
<li><em>Estimated Completion Time, ECT(n; p)</em>, is the completion time of task n executed on resource <em>p</em>. It is given by: <br  />
 \(ECT(n,p) = EET(n,p)+max[EAT(n,p),DAT(n,p)]\) <br  />
 The ETF scheduler finds the resource with the minimum ECT value for each available task. Next, the task with the minimum ECT value is determined and it is <br  />
 scheduled first. This routine is performed until all available tasks are assigned to a PE.</li>
</ul>
</li>
<li><b>Constraint Programming scheduler</b> is formulated using IBM ILOG CPLEX Optimization Studio (<a href="https://www.ibm.com/support/knowledgecenter/SSSA5P_12.8.0/ilog.odms.studio.help/pdf/usrcplex.pdf">CPLEX's User Manual</a>) to obtain an optimal schedule whenever the problem <br  />
 size allows. The simulation framework dynamically calls the CP solver at the injection of each frame (i.e., an instance of an application) to find the schedule as a function <br  />
 of the current system state. Then, the obtained schedule is stored in a lookup table and tasks are assigned to PEs accordingly as the simulation proceeds. To see implementation <br  />
 details are in <a class="el" href="_c_p__models_8py.html">CP_models.py</a></li>
</ul>
<p>Users can implement their own scheduling algorithms as a member function in Scheduler class.</p>
<h1><a class="anchor" id="dtpm"></a>
Built-in DTPM policies</h1>
<p>State-of-the-art SoCs support multiple voltage-frequency domains and DVFS, which enables users to optimize for various power-performance trade-offs. To support this capability, <br  />
 DS3 allows each PE to have a range of OPPs, configurable in the resource database. The OPPs are voltage-frequency tuples that represent all supported frequencies of a given PE, <br  />
 which can be exploited by DTPM algorithms to tune the SoC at runtime.</p>
<p>The integrated power and temperature models enable user to implement a wide range of DTPM policies using DS3. To provide a solid baseline to users, DS3 provides built-in <br  />
DVFS policies that are commonly used in commercial SoCs. More specifically, users use the input configuration file to set the DTPM policy to <a href="https://www.kernel.org/doc/Documentation/cpu-freq/governors.txt">ondemand, performance and powersave</a> <br  />
 governors, or to a custom DTPM governor.</p><ul>
<li><b>Ondemand Governor</b>: The ondemand governor controls the OPP of each PE as a function of its utilization. The supported voltage-frequency pairs of a PE are given <br  />
 by the following set: <br  />
 \(\mathcal{OPP} = \{(V_1, f_1), (V_2, f_2), \ldots, (V_k,f_k)\}\) <br  />
 where k is the number of operating points supported by that PE. Suppose that the PE currently operates at \((V2; f2)\). If the utilization of the PE is less than a <br  />
 user-defined threshold, then the <em>ondemand governor</em> decreases the frequency and voltage such that the new OPP becomes \((V1; f1)\). If the utilization is greater <br  />
 than another user-defined threshold, the OPP is increased to the maximum frequency. Otherwise, the OPP stays at the current value, i.e., \((V2; f2)\).</li>
<li><b>Performance Governor</b>: This policy sets the frequency and voltage of all PEs to their maximum values to minimize execution time.</li>
<li><b>Powersave Governor</b>: This policy sets the frequency and voltage of all PEs to their minimum values to minimize power consumption.</li>
<li><b>User-Specified Values</b>: This policy enables users to set the OPP (i.e., frequency and voltage) of each PE individually to a constant value within the permitted range. <br  />
 It enables thorough power-performance exploration by sweeping the OPPs.</li>
</ul>
<p>Users can also implement their own DTPM algorithms as a member function in <a class="el" href="namespace_d_t_p_m.html" title="This file contains the code for the DTPM module.">DTPM</a> class. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
