<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DS3 Manual: DTPM_power_models.py Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="DARPA_logo.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DS3 Manual
   </div>
   <div id="projectbrief">DS3: A System-Level Domain-Specific System-on-ChipSimulationFramework</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_d_t_p_m__power__models_8py_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">DTPM_power_models.py</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_d_t_p_m__power__models_8py.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno"><a class="line" href="namespace_d_t_p_m__power__models.html">    1</a></span>&#160;<span class="stringliteral">&#39;&#39;&#39;!</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="stringliteral">@brief This file contains functions that are used by the DVFS mechanism and PEs to get performance, power, and thermal values.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="stringliteral">This file contains the analytical models used for power and thermal, it computes performance, power, energy, and temperature, and it contains methods to change the frequency and number of active cores.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="stringliteral">&#39;&#39;&#39;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">from</span> math <span class="keyword">import</span> exp</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keyword">import</span> numpy <span class="keyword">as</span> np</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="keyword">import</span> sys</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="keyword">import</span> copy</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160; </div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keyword">import</span> DASH_Sim_utils</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="keyword">import</span> common</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"># Thermal model (Odroid XU3 board)</span></div>
<div class="line"><a name="l00015"></a><span class="lineno"><a class="line" href="namespace_d_t_p_m__power__models.html#aa8f71f8d5880ddae12c5a5f3c28ba3a6">   15</a></span>&#160;A_model = [[0.9928,    0.000566,   0.004281,  0.0003725, 1.34e-5  ],</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;           [0.006084,  0.9909,     0,         0.001016,  8.863e-5 ],</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;           [0,         0.0008608,  0.993,     0,         0.0008842],</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;           [0.006844,  -0.0005119, 0,         0.9904,    0.0003392],</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;           [0.0007488, 0.003932,   8.654e-5, 0.002473,   0.9905   ]]</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160; </div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"># Big cluster model (Odroid XU3 board)</span></div>
<div class="line"><a name="l00022"></a><span class="lineno"><a class="line" href="namespace_d_t_p_m__power__models.html#a546c1bd62e2a47064ef6b332bff24834">   22</a></span>&#160;B_model_big     = [[0.0471  ],</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;                   [0.01265 ],</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;                   [0.113   ],</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;                   [0.01646 ],</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;                   [0.01476 ]]</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"># Little cluster model (Odroid XU3 board)</span></div>
<div class="line"><a name="l00028"></a><span class="lineno"><a class="line" href="namespace_d_t_p_m__power__models.html#af42345c873652d6f9fcb63efaeda8689">   28</a></span>&#160;B_model_little  = [[0.02399 ],</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;                   [0       ],</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;                   [0.02819 ],</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;                   [0.007198],</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;                   [0.03902 ]]</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"># Memory model (Odroid XU3 board)</span></div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="namespace_d_t_p_m__power__models.html#a3bbfbe64c8e1e25d4faa520e5af5e0ee">   34</a></span>&#160;B_model_mem     = [[0.07423 ],</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;                   [0       ],</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;                   [0.6708  ],</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;                   [0       ],</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                   [0.01404 ]]</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment"># GPU model (Odroid XU3 board)</span></div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="namespace_d_t_p_m__power__models.html#aa51f63a8c0e43b5a56963777b52f1d05">   40</a></span>&#160;B_model_gpu     = [[6.898e-7],</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                   [0.001971],</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;                   [2.108e-6],</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;                   [0.01682 ],</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;                   [0.03811 ]]</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment"># Accelerator model</span></div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="namespace_d_t_p_m__power__models.html#ad9881b59accdd730ae6636d7d1d8a07b">   46</a></span>&#160;B_model_acc     = [[0       ],</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;                   [0       ],</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                   [0       ],</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                   [0       ],</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                   [0       ]]</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment"># Memory power (Odroid XU3 board)</span></div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="namespace_d_t_p_m__power__models.html#a34e8bc4adecb96930803e3cf7b4095f5">   53</a></span>&#160;P_mem = 0.0473</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment"># GPU power (Odroid XU3 board)</span></div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="namespace_d_t_p_m__power__models.html#ad3e152ce81853cb3356490145744158a">   56</a></span>&#160;P_GPU = 0.1201</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="namespace_d_t_p_m__power__models.html#a4d89e060febe70c6530778af408c2ca3">   58</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespace_d_t_p_m__power__models.html#a4d89e060febe70c6530778af408c2ca3">compute_DVFS_performance_slowdown</a>(cluster):</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="stringliteral">&#39;&#39;&#39;!</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="stringliteral">    Compute the slowdown from running a given task with lower frequency.</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="stringliteral">    @param cluster: Cluster object</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="stringliteral">    @return Slowdown for the given task</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="stringliteral">    &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="comment"># Calculate the slowdown based on the current frequency</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordflow">if</span> cluster.current_frequency == 0 <span class="keywordflow">or</span> len(cluster.OPP) == 0:</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="keywordflow">return</span> 0</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        max_freq = <a class="code" href="namespace_d_t_p_m__power__models.html#a48124965f0c4bbd3cf98990f4ad9808c">get_max_freq</a>(cluster.OPP)</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        slowdown_ratio = float(max_freq) / float(cluster.current_frequency)</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <span class="keywordflow">return</span> slowdown_ratio - 1</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment"># end compute_DVFS_performance_slowdown(cluster)</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="namespace_d_t_p_m__power__models.html#a33aef80593b650e23f5b1f79dd878e4a">   73</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespace_d_t_p_m__power__models.html#a33aef80593b650e23f5b1f79dd878e4a">compute_Cdyn_and_alpha</a>(resource, max_power_consumption, freq_threshold, OPP=None):</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="stringliteral">&#39;&#39;&#39;!</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="stringliteral">    Based on the maximum frequency, voltage, and measured power dissipation, compute the capacitance C times the switching activity Alpha for the given task.</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="stringliteral">    Pdyn = Cdyn * alpha * f * V^2</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="stringliteral">    @param resource: Current resource object</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="stringliteral">    @param max_power_consumption: Baseline maximum power consumption</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="stringliteral">    @param freq_threshold: Frequency at which the baseline power consumption was profiled (based on the configurations defined in the SoC file)</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="stringliteral">    @param OPP: Allows a given OPP to be used as parameter in order to estimate the Cdyn_alpha for an OPP that is not the current one. Otherwise, use the current OPP. (Optional)</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="stringliteral">    @return Computed Cdyn_alpha for the current cluster</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="stringliteral">    &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    max_freq = <a class="code" href="namespace_d_t_p_m__power__models.html#a72eb1a0883aa9da4fab60acadd6b13dd">get_frequency_in_Hz</a>(freq_threshold)</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordflow">if</span> OPP <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        max_volt = <a class="code" href="namespace_d_t_p_m__power__models.html#a9842c48a1a666626749170428c3ac8eb">get_voltage_in_V</a>(<a class="code" href="namespace_d_t_p_m__power__models.html#abd99e7ecc4a5cea6d0c1184e512b7424">get_voltage_constant_mode</a>(common.ClusterManager.cluster_list[resource.cluster_ID].OPP, freq_threshold))</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <span class="keywordflow">if</span> len(common.ClusterManager.cluster_list[resource.cluster_ID].OPP) &gt; 0:</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            Cdyn_alpha = max_power_consumption / (max_freq * max_volt ** 2)</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            Cdyn_alpha = 0</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        max_volt = <a class="code" href="namespace_d_t_p_m__power__models.html#a9842c48a1a666626749170428c3ac8eb">get_voltage_in_V</a>(<a class="code" href="namespace_d_t_p_m__power__models.html#abd99e7ecc4a5cea6d0c1184e512b7424">get_voltage_constant_mode</a>(OPP, freq_threshold))</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <span class="keywordflow">if</span> len(OPP) &gt; 0:</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            Cdyn_alpha = max_power_consumption / (max_freq * max_volt ** 2)</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            Cdyn_alpha = 0</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">return</span> Cdyn_alpha</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment"># end compute_Cdyn_and_alpha(resource, max_power_consumption, freq_threshold, OPP=None)</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="namespace_d_t_p_m__power__models.html#af8b8111dffef911ea6338fe31fb371c8">   99</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespace_d_t_p_m__power__models.html#af8b8111dffef911ea6338fe31fb371c8">compute_static_power_dissipation</a>(cluster_ID, input_temperature=None, input_voltage=None):</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="stringliteral">&#39;&#39;&#39;!</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="stringliteral">    Compute the static power dissipation of the PE.</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="stringliteral">    @param cluster_ID: ID of the current cluster</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="stringliteral">    @param input_temperature: If specified, use an input temperature vector. Otherwise, use the current one. (Optional)</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="stringliteral">    @param input_voltage: If specified, use an input voltage. Otherwise, use the current one. (Optional)</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="stringliteral">    &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keywordflow">if</span> common.ClusterManager.cluster_list[cluster_ID].type == <span class="stringliteral">&quot;ACC&quot;</span>:</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        static_power_core = 0</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keywordflow">if</span> input_temperature <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            current_temperature = max(common.current_temperature_vector)</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            current_temperature = max(input_temperature)</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <span class="keywordflow">if</span> input_voltage <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            current_voltage = common.ClusterManager.cluster_list[cluster_ID].current_voltage</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            current_voltage = input_voltage</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        temp_K = 273 + current_temperature <span class="comment"># Convert the temperature to Kelvin</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        voltage_V = <a class="code" href="namespace_d_t_p_m__power__models.html#a9842c48a1a666626749170428c3ac8eb">get_voltage_in_V</a>(current_voltage)</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        static_power_cluster = voltage_V * common.C1 * temp_K * temp_K * exp(-common.C2/temp_K) + common.Igate*voltage_V</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <span class="keywordflow">if</span> common.ClusterManager.cluster_list[cluster_ID].type == <span class="stringliteral">&quot;LTL&quot;</span>:</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            static_power_cluster /= 4 <span class="comment"># Scaling the leakage power based on the area differece between big and little cores. (C1 and C2 are obtained for the big cluster)</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        static_power_core = static_power_cluster / 4  <span class="comment"># Max 4 cores per cluster</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">return</span> static_power_core</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment"># end compute_static_power_dissipation(PE, input_temperature=None, input_voltage=None)</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="namespace_d_t_p_m__power__models.html#a745d2c5771fd1b2bda1ef599bdc2b362">  126</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespace_d_t_p_m__power__models.html#a745d2c5771fd1b2bda1ef599bdc2b362">compute_dynamic_power_dissipation</a>(current_frequency, current_voltage, Cdyn_alpha):</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="stringliteral">&#39;&#39;&#39;!</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="stringliteral">    Compute the dynamic power dissipation for the current task based on the current state of the PE.</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="stringliteral">    @param current_frequency: PE&#39;s current frequency</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="stringliteral">    @param current_voltage: PE&#39;s current voltage</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="stringliteral">    @param Cdyn_alpha: PE&#39;s current Cdyn_alpha</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="stringliteral">    @return Dynamic power dissipation for the current PE</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="stringliteral">    &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    current_frequency_Hz = <a class="code" href="namespace_d_t_p_m__power__models.html#a72eb1a0883aa9da4fab60acadd6b13dd">get_frequency_in_Hz</a>(current_frequency)</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    current_voltage_V = <a class="code" href="namespace_d_t_p_m__power__models.html#a9842c48a1a666626749170428c3ac8eb">get_voltage_in_V</a>(current_voltage)</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    dynamic_power_core =  Cdyn_alpha * current_frequency_Hz * (current_voltage_V**2)</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordflow">return</span> dynamic_power_core</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment"># end compute_dynamic_power_dissipation(current_frequency, current_voltage, Cdyn_alpha)</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="namespace_d_t_p_m__power__models.html#aa11002bad841d75c7b45eb700c5ed18a">  140</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespace_d_t_p_m__power__models.html#aa11002bad841d75c7b45eb700c5ed18a">get_execution_time_max_frequency</a>(task, resource):</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="stringliteral">&#39;&#39;&#39;!</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="stringliteral">    Get the execution time of the current task if it was running at maximum frequency and considering the randomization factor that was used.</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="stringliteral">    @param task: Current task object</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="stringliteral">    @param resource: Current resource object</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="stringliteral">    @return Execution time of the current task</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="stringliteral">    &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    task_ind = resource.supported_functionalities.index(task.name)                  <span class="comment"># Retrieve the index of the task</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    execution_time = resource.performance[task_ind]                                 <span class="comment"># Retrieve the mean execution time of a task</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    if(resource.performance[task_ind]):</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="comment"># Randomize the execution time based on a gaussian distribution</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="comment">#randomized_execution_time = max(round(</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <span class="comment">#       random.gauss(execution_time,common.standard_deviation * execution_time)), 1)</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="comment"># randomized_execution_time = max(round(</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="comment">#         np.random.normal(execution_time,common.standard_deviation * execution_time)), 1)</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160; </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        randomized_execution_time = execution_time</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="keywordflow">if</span> (common.DEBUG_SIM):</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            print(<span class="stringliteral">&#39;Randomized execution time is %s, the original was %s&#39;</span> </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                  %(randomized_execution_time, execution_time))                                                                                             <span class="comment"># finding execution time using randomization values by mean value (expected execution time) </span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <span class="keywordflow">return</span> randomized_execution_time, float(randomized_execution_time)/float(execution_time)</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordflow">else</span>:                                                                                                                               <span class="comment"># if the expected execution time is 0, ie. if it is dummy task, then no randomization</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <span class="comment"># If a task has a 0 us of execution (dummy ending task), it should stay the same</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="keywordflow">return</span> execution_time, 1</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment"># end get_execution_time_max_frequency(task, resource)</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="namespace_d_t_p_m__power__models.html#aa395bf114a31df88ad5f3e7513b8a08e">  169</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespace_d_t_p_m__power__models.html#aa395bf114a31df88ad5f3e7513b8a08e">get_max_power_consumption</a>(cluster, PEs, N_tasks=None, N_cores=None):</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="stringliteral">&#39;&#39;&#39;!</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="stringliteral">    Get the power consumption of the current PE.</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="stringliteral">    @param cluster: Current cluster object</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="stringliteral">    @param PEs: The PEs available in the current SoC</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="stringliteral">    @param N_tasks: If specified, use a given number of tasks for predicting the power consumption. Otherwise, use the current number of tasks. (Optional)</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="stringliteral">    @param N_cores: If specified, use a given number of cores for predicting the power consumption. Otherwise, use the current number of active cores. (Optional)</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="stringliteral">    @return Maximum power consumption for the current cluster</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="stringliteral">    &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordflow">if</span> N_tasks <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        num_tasks = <a class="code" href="namespace_d_a_s_h___sim__utils.html#a99aab56376ce5ff66032d442e5a09b46">DASH_Sim_utils.get_num_tasks_being_executed</a>(cluster, PEs)</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        num_tasks = N_tasks</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160; </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">if</span> N_cores <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        num_cores = cluster.num_active_cores</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        num_cores = N_cores</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160; </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">if</span> num_tasks &gt; 0:</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> cluster.power_profile.items():</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            <span class="keywordflow">if</span> cluster.current_frequency &lt;= k:</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                <span class="keywordflow">if</span> num_tasks &lt;= num_cores:</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                    <span class="keywordflow">return</span> v[num_tasks - 1], int(k)</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                    <span class="keywordflow">return</span> v[num_cores - 1], int(k)</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        print(<span class="stringliteral">&quot;[E] Power profile (Cluster {} ID {}) does not have a frequency threshold higher than {}&quot;</span>.format(cluster.type, cluster.ID, cluster.current_frequency))</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        sys.exit()</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="keywordflow">return</span> 0, 0</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment"># end get_execution_time_max_frequency(cluster, PEs, N_tasks=None, N_cores=None)</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160; </div>
<div class="line"><a name="l00201"></a><span class="lineno"><a class="line" href="namespace_d_t_p_m__power__models.html#a5259c127be3d9cc6cc3cbdac95a98be0">  201</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespace_d_t_p_m__power__models.html#a5259c127be3d9cc6cc3cbdac95a98be0">initialize_B_model</a>():</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="stringliteral">&#39;&#39;&#39;!</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="stringliteral">    Initialize the B_model matrix, used in the temperature prediction.</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="stringliteral">    &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    common.B_model = B_model_mem</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    common.B_model = np.append(common.B_model, B_model_gpu, axis=1)</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">for</span> cluster <span class="keywordflow">in</span> common.ClusterManager.cluster_list:</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <span class="keywordflow">if</span> cluster.type != <span class="stringliteral">&quot;MEM&quot;</span>:</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            <span class="keywordflow">if</span> cluster.type == <span class="stringliteral">&quot;BIG&quot;</span>:</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                common.B_model = np.append(common.B_model, B_model_big, axis=1)</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            <span class="keywordflow">elif</span> cluster.type == <span class="stringliteral">&quot;LTL&quot;</span>:</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                common.B_model = np.append(common.B_model, B_model_little, axis=1)</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                common.B_model = np.append(common.B_model, B_model_acc, axis=1)</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment"># end initialize_B_model()</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="namespace_d_t_p_m__power__models.html#a7a8c48822db8400738a6ca192d153c14">  217</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespace_d_t_p_m__power__models.html#a7a8c48822db8400738a6ca192d153c14">predict_temperature</a>():</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="stringliteral">&#39;&#39;&#39;!</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="stringliteral">    Predict the temperature based on the current status of the clusters.</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="stringliteral">    @return Current temperature vector for the SoC</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="stringliteral">    &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    power_list = []</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    power_list.append(P_mem) <span class="comment"># Memory model</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    power_list.append(P_GPU) <span class="comment"># GPU model</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordflow">for</span> cluster <span class="keywordflow">in</span> common.ClusterManager.cluster_list:</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="keywordflow">if</span> cluster.type != <span class="stringliteral">&quot;MEM&quot;</span>:</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            power_list.append(cluster.current_power_cluster)</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    predicted_temperature = np.matmul(A_model, np.array(common.current_temperature_vector) - common.T_ambient) + \</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                            np.matmul(common.B_model, np.array(power_list)) + common.T_ambient</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">return</span> predicted_temperature</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment"># end predict_temperature()</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; </div>
<div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="namespace_d_t_p_m__power__models.html#adbbdb88f910d369ef2d1a3022c540bf0">  234</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespace_d_t_p_m__power__models.html#adbbdb88f910d369ef2d1a3022c540bf0">evaluate_throttling</a>(timestamp, input_freq, input_trip_temperature, throttling_type):</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="stringliteral">&#39;&#39;&#39;!</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="stringliteral">    Apply throttling if the temperature exceeds the trip points.</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="stringliteral">    @param timestamp: Current timestamp</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="stringliteral">    @param input_freq: Current frequency</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="stringliteral">    @param input_trip_temperature: List of trip points to be evaluated</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="stringliteral">    @param throttling_type: Define the throttling type: regular or DTPM</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="stringliteral">    &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">if</span> (common.enable_throttling <span class="keywordflow">and</span> throttling_type == <span class="stringliteral">&#39;regular&#39;</span>) <span class="keywordflow">or</span> (common.enable_DTPM_throttling <span class="keywordflow">and</span> throttling_type == <span class="stringliteral">&#39;DTPM&#39;</span>):</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        current_temp = max(common.current_temperature_vector)</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="keywordflow">for</span> trip_point, trip_temp <span class="keywordflow">in</span> enumerate(input_trip_temperature):</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            <span class="comment"># If temperature is higher than the trip temp, throttle the PEs</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            <span class="keywordflow">if</span> current_temp &gt; trip_temp:</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                <span class="comment"># Check if the PEs are already being throttled</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                <span class="keywordflow">if</span> common.throttling_state &lt; trip_point:</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                    freq_list = []</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                    <span class="keywordflow">for</span> i, cluster <span class="keywordflow">in</span> enumerate(common.ClusterManager.cluster_list):</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                        <span class="keywordflow">if</span> cluster.DVFS != <span class="stringliteral">&#39;none&#39;</span>:</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                            <span class="keywordflow">if</span> throttling_type == <span class="stringliteral">&#39;regular&#39;</span>:</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                                current_trip_freq = cluster.trip_freq[trip_point]</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                            <span class="keywordflow">elif</span> throttling_type == <span class="stringliteral">&#39;DTPM&#39;</span>:</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                                current_trip_freq = cluster.DTPM_trip_freq[trip_point]</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                            <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                                print(<span class="stringliteral">&#39;[E] Invalid throttling type, please check evaluate_throttling method&#39;</span>)</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                                sys.exit()</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                            <span class="keywordflow">if</span> current_trip_freq != -1:</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                                <span class="keywordflow">if</span> input_freq[i] &gt; current_trip_freq:</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                                    freq_list.append(current_trip_freq)</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                                <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                                    freq_list.append(input_freq[i])</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                            <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                                freq_list.append(input_freq[i])</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                    freq_list = [ x / 1000 <span class="keywordflow">for</span> x <span class="keywordflow">in</span> freq_list]</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                    <a class="code" href="namespace_d_t_p_m__power__models.html#a94089a6a0f58f9fe8f950adb500f8028">set_frequency</a>(timestamp, freq_list, <span class="keyword">True</span>)</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                    common.throttling_state = trip_point</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                <span class="keywordflow">if</span> common.snippet_throttle &lt; trip_point:</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                    common.snippet_throttle = trip_point</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                <span class="keywordflow">if</span> common.throttling_state == trip_point <span class="keywordflow">and</span> current_temp &lt; trip_temp - common.trip_hysteresis[trip_point]:</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                    <span class="comment"># PEs were throttled, but now the temperature has reduced, restore frequency to the previous trip point</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                    common.throttling_state -= 1</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                    freq_list = []</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                    <span class="comment"># If trip point is 0, restore the input frequency, otherwise restore the previous trip point</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                    <span class="keywordflow">if</span> trip_point == 0:</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                        freq_list = input_freq</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                    <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                        <span class="keywordflow">for</span> i, cluster <span class="keywordflow">in</span> enumerate(common.ClusterManager.cluster_list):</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                            <span class="keywordflow">if</span> cluster.DVFS != <span class="stringliteral">&#39;none&#39;</span>:</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                                <span class="keywordflow">if</span> throttling_type == <span class="stringliteral">&#39;regular&#39;</span>:</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                                    current_trip_freq = cluster.trip_freq[trip_point - 1]</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                                <span class="keywordflow">elif</span> throttling_type == <span class="stringliteral">&#39;DTPM&#39;</span>:</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                                    current_trip_freq = cluster.DTPM_trip_freq[trip_point - 1]</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                                <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                                    print(<span class="stringliteral">&#39;[E] Invalid throttling type, please check evaluate_throttling method&#39;</span>)</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                                    sys.exit()</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                                <span class="keywordflow">if</span> current_trip_freq != -1:</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                                    <span class="keywordflow">if</span> input_freq[i] &gt; current_trip_freq:</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                                        freq_list.append(current_trip_freq)</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                                    <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                                        freq_list.append(input_freq[i])</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                                <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                                    freq_list.append(input_freq[i])</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                    freq_list = [ x / 1000 <span class="keywordflow">for</span> x <span class="keywordflow">in</span> freq_list]</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                    <a class="code" href="namespace_d_t_p_m__power__models.html#a94089a6a0f58f9fe8f950adb500f8028">set_frequency</a>(timestamp, freq_list, <span class="keyword">True</span>)</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment"># end evaluate_throttling(timestamp, input_freq, input_trip_temperature, throttling_type)</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160; </div>
<div class="line"><a name="l00300"></a><span class="lineno"><a class="line" href="namespace_d_t_p_m__power__models.html#abd99e7ecc4a5cea6d0c1184e512b7424">  300</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespace_d_t_p_m__power__models.html#abd99e7ecc4a5cea6d0c1184e512b7424">get_voltage_constant_mode</a>(OPP_list, constantFrequency):</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="stringliteral">&#39;&#39;&#39;!</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="stringliteral">    Get the voltage of the OPP that satisfies the defined constant frequency.</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="stringliteral">    @param OPP_list: List of OPPs of the current cluster</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="stringliteral">    @param constantFrequency: Input frequency</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="stringliteral">    @return Voltage related to the input frequency, following the OPP list</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="stringliteral">    &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordflow">if</span> constantFrequency &lt; <a class="code" href="namespace_d_t_p_m__power__models.html#af43bd1deddf711c2f85f1256bfd94a55">get_min_freq</a>(OPP_list):</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        print(<span class="stringliteral">&quot;[E] The frequency set in the constant DVFS mode is lower than the minimum frequency that the PE supports, please check the resource file&quot;</span>)</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        sys.exit()</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordflow">for</span> OPP_i, OPP <span class="keywordflow">in</span> enumerate(OPP_list):</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="keywordflow">if</span> constantFrequency == OPP[0]:</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            <span class="keywordflow">return</span> OPP[1]</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">if</span> constantFrequency &gt; <a class="code" href="namespace_d_t_p_m__power__models.html#a48124965f0c4bbd3cf98990f4ad9808c">get_max_freq</a>(OPP_list):</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        print(<span class="stringliteral">&quot;[E] The frequency set in the constant DVFS mode is higher than the maximum frequency that the PE supports, please check the resource file&quot;</span>)</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        sys.exit()</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    print(<span class="stringliteral">&quot;[E] Target frequency was not found in the OPP list:&quot;</span>, constantFrequency)</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    sys.exit()</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment"># end get_voltage_constant_mode(OPP_list, constantFrequency)</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno"><a class="line" href="namespace_d_t_p_m__power__models.html#a48124965f0c4bbd3cf98990f4ad9808c">  320</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespace_d_t_p_m__power__models.html#a48124965f0c4bbd3cf98990f4ad9808c">get_max_freq</a>(OPP_list):</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="stringliteral">&#39;&#39;&#39;!</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="stringliteral">    Get the maximum frequency of a cluster.</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="stringliteral">    @param OPP_list: List of OPPs of the current cluster</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="stringliteral">    @return The maximum frequency defined in the OPP list</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="stringliteral">    &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keywordflow">if</span> len(OPP_list) &gt; 0:</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        opp_tuple_max = OPP_list[len(OPP_list) - 1]</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="keywordflow">return</span>  opp_tuple_max[0]</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <span class="keywordflow">return</span> 0</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment"># end get_max_freq(OPP_list)</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160; </div>
<div class="line"><a name="l00333"></a><span class="lineno"><a class="line" href="namespace_d_t_p_m__power__models.html#af43bd1deddf711c2f85f1256bfd94a55">  333</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespace_d_t_p_m__power__models.html#af43bd1deddf711c2f85f1256bfd94a55">get_min_freq</a>(OPP_list):</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="stringliteral">&#39;&#39;&#39;!</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="stringliteral">    Get the minimum frequency of a cluster.</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="stringliteral">    @param OPP_list: List of OPPs of the current cluster</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="stringliteral">    @return The minimum frequency defined in the OPP list</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="stringliteral">    &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">if</span> len(OPP_list) &gt; 0:</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        opp_tuple_min = OPP_list[0]</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <span class="keywordflow">return</span> opp_tuple_min[0]</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <span class="keywordflow">return</span> 0</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment"># end get_min_freq(OPP_list)</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160; </div>
<div class="line"><a name="l00346"></a><span class="lineno"><a class="line" href="namespace_d_t_p_m__power__models.html#a873a9de6e0fcfedd71d08f990d15b540">  346</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespace_d_t_p_m__power__models.html#a873a9de6e0fcfedd71d08f990d15b540">get_max_voltage</a>(OPP_list):</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="stringliteral">&#39;&#39;&#39;!</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="stringliteral">    Get the maximum voltage of a cluster.</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="stringliteral">    @param OPP_list: List of OPPs of the current cluster</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="stringliteral">    @return The maximum voltage defined in the OPP list</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="stringliteral">    &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordflow">if</span> len(OPP_list) &gt; 0:</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        opp_tuple_max = OPP_list[len(OPP_list) - 1]</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <span class="keywordflow">return</span>  opp_tuple_max[1]</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <span class="keywordflow">return</span> 0</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment"># end get_max_voltage(OPP_list)</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160; </div>
<div class="line"><a name="l00359"></a><span class="lineno"><a class="line" href="namespace_d_t_p_m__power__models.html#aa13ff06bd0c93b4d1526f2e828159774">  359</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespace_d_t_p_m__power__models.html#aa13ff06bd0c93b4d1526f2e828159774">get_min_voltage</a>(OPP_list):</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="stringliteral">&#39;&#39;&#39;!</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="stringliteral">    Get the minimum voltage of a cluster.</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="stringliteral">    @param OPP_list: List of OPPs of the current cluster</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="stringliteral">    @return The minimum voltage defined in the OPP list</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="stringliteral">    &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keywordflow">if</span> len(OPP_list) &gt; 0:</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        opp_tuple_min = OPP_list[0]</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <span class="keywordflow">return</span> opp_tuple_min[1]</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <span class="keywordflow">return</span> 0</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment"># end get_min_voltage(OPP_list)</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160; </div>
<div class="line"><a name="l00372"></a><span class="lineno"><a class="line" href="namespace_d_t_p_m__power__models.html#a72eb1a0883aa9da4fab60acadd6b13dd">  372</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespace_d_t_p_m__power__models.html#a72eb1a0883aa9da4fab60acadd6b13dd">get_frequency_in_Hz</a>(frequency_MHz):</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="stringliteral">&#39;&#39;&#39;!</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="stringliteral">    Convert frequency from MHz to Hz.</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="stringliteral">    @param frequency_MHz: Frequency in MHz</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="stringliteral">    @return Frequency in Hz</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="stringliteral">    &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordflow">return</span> frequency_MHz * 1e6</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment"># end get_frequency_in_Hz(frequency_MHz)</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160; </div>
<div class="line"><a name="l00381"></a><span class="lineno"><a class="line" href="namespace_d_t_p_m__power__models.html#a9842c48a1a666626749170428c3ac8eb">  381</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespace_d_t_p_m__power__models.html#a9842c48a1a666626749170428c3ac8eb">get_voltage_in_V</a>(voltage_mV):</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="stringliteral">&#39;&#39;&#39;!</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="stringliteral">    Convert voltage from mV to V.</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="stringliteral">    @param voltage_mV: Voltage in mV</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="stringliteral">    @return Voltage in V</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="stringliteral">    &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="keywordflow">return</span> voltage_mV * 1e-3</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment"># end get_voltage_in_V(voltage_mV)</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160; </div>
<div class="line"><a name="l00390"></a><span class="lineno"><a class="line" href="namespace_d_t_p_m__power__models.html#a397e3796e3ba35a4e85ec8950a1cd1f4">  390</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespace_d_t_p_m__power__models.html#a397e3796e3ba35a4e85ec8950a1cd1f4">decrease_frequency</a>(cluster, timestamp):</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="stringliteral">&#39;&#39;&#39;!</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="stringliteral">    Decrease the frequency by one step (based on the defined OPPs).</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="stringliteral">    @param cluster: Current cluster object</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="stringliteral">    @param timestamp: Current timestamp</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="stringliteral">    @return Change the frequency and return whether the frequency is already at the minimum OPP or not</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="stringliteral">    &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">for</span> OPP_i, OPP_tuple <span class="keywordflow">in</span> enumerate(cluster.OPP):</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <span class="keywordflow">if</span> OPP_tuple[0] == cluster.current_frequency:</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            <span class="keywordflow">if</span> OPP_i == 0:</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                <span class="comment"># Already at min freq</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                cluster.current_frequency = cluster.OPP[OPP_i][0]</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                cluster.current_voltage = cluster.OPP[OPP_i][1]</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                <span class="keywordflow">if</span> (common.DEBUG_SIM):</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                    print(<span class="stringliteral">&#39;[D] Time %d: PE %s - The frequency is already at the minimum: %d&#39;</span> % (timestamp, cluster.name, cluster.current_frequency))</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                <span class="comment"># Decrease the frequency to the previous OPP</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                cluster.current_frequency = cluster.OPP[OPP_i - 1][0]</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                cluster.current_voltage = cluster.OPP[OPP_i - 1][1]</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                <span class="keywordflow">if</span> (common.DEBUG_SIM):</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                    print(<span class="stringliteral">&#39;[D] Time %d: PE %s - The frequency was decreased: %d&#39;</span> % (timestamp, cluster.name, cluster.current_frequency))</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">True</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment"># end decrease_frequency(cluster, timestamp)</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160; </div>
<div class="line"><a name="l00415"></a><span class="lineno"><a class="line" href="namespace_d_t_p_m__power__models.html#adb5634ffab786397bb10c2c5e14558b7">  415</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespace_d_t_p_m__power__models.html#adb5634ffab786397bb10c2c5e14558b7">increase_frequency</a>(cluster, timestamp):</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="stringliteral">&#39;&#39;&#39;!</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="stringliteral">    Increase the frequency by one step (based on the defined OPPs).</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="stringliteral">    @param cluster: Current cluster object</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="stringliteral">    @param timestamp: Current timestamp</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="stringliteral">    @return Change the frequency and return whether the frequency is already at the maximum OPP or not</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="stringliteral">    &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordflow">for</span> OPP_i, OPP_tuple <span class="keywordflow">in</span> enumerate(cluster.OPP):</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        <span class="keywordflow">if</span> OPP_tuple[0] == cluster.current_frequency:</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            <span class="keywordflow">if</span> OPP_i == len(cluster.OPP) - 1:</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                <span class="comment"># Already at max freq</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                cluster.current_frequency = cluster.OPP[OPP_i][0]</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                cluster.current_voltage = cluster.OPP[OPP_i][1]</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                <span class="keywordflow">if</span> (common.DEBUG_SIM):</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                    print(<span class="stringliteral">&#39;[D] Time %d: PE %s - The frequency is already at the maximum: %d&#39;</span> % (timestamp, cluster.name, cluster.current_frequency))</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">False</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                <span class="comment"># Increase the frequency to the next OPP</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                cluster.current_frequency = cluster.OPP[OPP_i + 1][0]</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                cluster.current_voltage = cluster.OPP[OPP_i + 1][1]</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                <span class="keywordflow">if</span> (common.DEBUG_SIM):</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                    print(<span class="stringliteral">&#39;[D] Time %d: PE %s - The frequency was increased: %d&#39;</span> % (timestamp, cluster.name, cluster.current_frequency))</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">True</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment"># end increase_frequency(cluster, timestamp)</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160; </div>
<div class="line"><a name="l00440"></a><span class="lineno"><a class="line" href="namespace_d_t_p_m__power__models.html#af9a1bf09d01c4c70fd45f0ae6a7eaf79">  440</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespace_d_t_p_m__power__models.html#af9a1bf09d01c4c70fd45f0ae6a7eaf79">increase_frequency_all_PEs</a>(current_frequency_list):</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="stringliteral">&#39;&#39;&#39;!</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="stringliteral">    Increase the frequency of all PEs by one step (based on the respective defined OPPs).</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="stringliteral">    @param current_frequency_list: List with current frequencies for all clusters</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="stringliteral">    @return Return whether all PEs are at maximum frequency and the updated frequency list</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="stringliteral">    &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    max_freq_counter = 0</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    num_PEs = len(common.ClusterManager.cluster_list) - 1</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keywordflow">for</span> cluster_ID <span class="keywordflow">in</span> range(num_PEs):</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        current_OPP = common.ClusterManager.cluster_list[cluster_ID].OPP</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <span class="keywordflow">for</span> OPP_i, OPP_tuple <span class="keywordflow">in</span> enumerate(current_OPP):</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            <span class="keywordflow">if</span> float(OPP_tuple[0] / 1000) == current_frequency_list[cluster_ID]:</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                <span class="keywordflow">if</span> OPP_i == len(current_OPP) - 1:</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                    <span class="comment"># Already at max freq</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                    max_freq_counter += 1</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                    <span class="keywordflow">break</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                    <span class="comment"># Increase the frequency to the next OPP</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                    current_frequency_list[cluster_ID] = float(current_OPP[OPP_i + 1][0] / 1000)</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                    <span class="keywordflow">break</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordflow">if</span> max_freq_counter == num_PEs:</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="keywordflow">return</span> (<span class="keyword">True</span>, current_frequency_list)</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        <span class="keywordflow">return</span> (<span class="keyword">False</span>, current_frequency_list)</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment"># end increase_frequency_all_PEs(current_frequency_list)</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160; </div>
<div class="line"><a name="l00466"></a><span class="lineno"><a class="line" href="namespace_d_t_p_m__power__models.html#a14d88f3a20ec782ca5f12ca5bd1ef8fb">  466</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespace_d_t_p_m__power__models.html#a14d88f3a20ec782ca5f12ca5bd1ef8fb">increase_num_cores_all_PEs</a>(current_num_cores):</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="stringliteral">&#39;&#39;&#39;!</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="stringliteral">    Increase the number of active cores by one (based on the respective cluster capacities).</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="stringliteral">    @param current_num_cores: List with current number of active cores for all clusters</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="stringliteral">    @return Return whether all clusters are at maximum capacity and the updated list of cores</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="stringliteral">    &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="keywordflow">if</span> current_num_cores[0] &lt; 4:</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        current_num_cores[0] += 1</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordflow">if</span> current_num_cores[1] &lt; 4:</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        current_num_cores[1] += 1</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keywordflow">if</span> current_num_cores[0] == 4 <span class="keywordflow">and</span> current_num_cores[1] == 4:</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <span class="keywordflow">return</span> (<span class="keyword">True</span>, current_num_cores)</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <span class="keywordflow">return</span> (<span class="keyword">False</span>, current_num_cores)</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment"># end increase_num_cores_all_PEs(current_num_cores)</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160; </div>
<div class="line"><a name="l00482"></a><span class="lineno"><a class="line" href="namespace_d_t_p_m__power__models.html#a50fcd4b71d45df63ad2157b278805406">  482</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespace_d_t_p_m__power__models.html#a50fcd4b71d45df63ad2157b278805406">set_max_frequency</a>(cluster, timestamp):</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="stringliteral">&#39;&#39;&#39;!</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="stringliteral">    Set the maximum frequency for the current cluster.</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="stringliteral">    @param cluster: Current cluster object</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="stringliteral">    @param timestamp: Current timestamp</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="stringliteral">    &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    max_freq = <a class="code" href="namespace_d_t_p_m__power__models.html#a48124965f0c4bbd3cf98990f4ad9808c">get_max_freq</a>(cluster.OPP)</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    max_voltage = <a class="code" href="namespace_d_t_p_m__power__models.html#a873a9de6e0fcfedd71d08f990d15b540">get_max_voltage</a>(cluster.OPP)</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    cluster.current_frequency = max_freq</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    cluster.current_voltage = max_voltage</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keywordflow">if</span> (common.DEBUG_SIM):</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        print(<span class="stringliteral">&#39;[D] Time %d: Cluster %s - The frequency was set to the maximum: %d&#39;</span> % (timestamp, cluster.name, cluster.current_frequency))</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="comment"># end set_max_frequency(cluster, timestamp)</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160; </div>
<div class="line"><a name="l00496"></a><span class="lineno"><a class="line" href="namespace_d_t_p_m__power__models.html#a61dbb4db911c289b4aa9f0a0b53d4bbf">  496</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespace_d_t_p_m__power__models.html#a61dbb4db911c289b4aa9f0a0b53d4bbf">keep_frequency</a>(cluster, timestamp):</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="stringliteral">&#39;&#39;&#39;!</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="stringliteral">    Keep the same frequency for the current cluster.</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="stringliteral">    @param cluster: Current cluster object</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="stringliteral">    @param timestamp: Current timestamp</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="stringliteral">    &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    cluster.current_frequency = cluster.current_frequency</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    cluster.current_voltage = cluster.current_voltage</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160; </div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="keywordflow">if</span> (common.DEBUG_SIM):</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        print(<span class="stringliteral">&#39;[D] Time %d: Cluster %s - The frequency was not modified: %d&#39;</span> % (timestamp, cluster.name, cluster.current_frequency))</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment"># end keep_frequency(cluster, timestamp)</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160; </div>
<div class="line"><a name="l00509"></a><span class="lineno"><a class="line" href="namespace_d_t_p_m__power__models.html#a94089a6a0f58f9fe8f950adb500f8028">  509</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespace_d_t_p_m__power__models.html#a94089a6a0f58f9fe8f950adb500f8028">set_frequency</a>(timestamp, frequency_list, throttling):</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="stringliteral">&#39;&#39;&#39;!</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="stringliteral">    Set a given frequency to the respective clusters.</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="stringliteral">    @param timestamp: Current timestamp</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="stringliteral">    @param frequency_list: List of frequncies for all clusters</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="stringliteral">    @param throttling: Throttling variable that indicates whether throttling is being applied</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="stringliteral">    &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keywordflow">for</span> i, cluster <span class="keywordflow">in</span> enumerate(common.ClusterManager.cluster_list):</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <span class="keywordflow">if</span> cluster.DVFS != <span class="stringliteral">&quot;none&quot;</span>:</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;            frequency_MHz = int(frequency_list[i] * 1000)</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;            freq_search = [item <span class="keywordflow">for</span> item <span class="keywordflow">in</span> cluster.OPP <span class="keywordflow">if</span> item[0] == frequency_MHz]</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            <span class="keywordflow">if</span> len(freq_search) &gt; 0:</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                cluster.current_frequency = frequency_MHz</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                cluster.current_voltage   = <a class="code" href="namespace_d_t_p_m__power__models.html#abd99e7ecc4a5cea6d0c1184e512b7424">get_voltage_constant_mode</a>(cluster.OPP, frequency_MHz)</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                <span class="keywordflow">if</span> <span class="keywordflow">not</span> throttling:</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                    cluster.policy_frequency = frequency_MHz</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;            <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                print(<span class="stringliteral">&quot;[E] Time %d: Frequency %d not supported by the Cluster %d (set_frequency method)&quot;</span> % (timestamp, frequency_MHz, cluster.ID))</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                sys.exit()</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment"># end set_frequency(timestamp, frequency_list, throttling)</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno"><a class="line" href="namespace_d_t_p_m__power__models.html#afb7e529058dd98d91b864921cf43539a">  530</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespace_d_t_p_m__power__models.html#afb7e529058dd98d91b864921cf43539a">set_active_cores</a>(cluster, PEs, num_cores):</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="stringliteral">&#39;&#39;&#39;!</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="stringliteral">    Set a given number of cores to the current cluster.</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="stringliteral">    @param cluster: Current cluster object</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="stringliteral">    @param PEs: The PEs available in the current SoC</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="stringliteral">    @param num_cores: Number of active cores to be set</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="stringliteral">    &#39;&#39;&#39;</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    cluster.num_active_cores = num_cores</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    capacity = len(cluster.PE_list)</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(capacity):</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        <span class="keywordflow">if</span> i + 1 &lt;= num_cores:</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;            PEs[i].enabled = <span class="keyword">True</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            PEs[i].enabled = <span class="keyword">False</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment"># end set_active_cores(cluster, PEs, num_cores)</span></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="anamespace_d_t_p_m__power__models_html_adbbdb88f910d369ef2d1a3022c540bf0"><div class="ttname"><a href="namespace_d_t_p_m__power__models.html#adbbdb88f910d369ef2d1a3022c540bf0">DTPM_power_models.evaluate_throttling</a></div><div class="ttdeci">def evaluate_throttling(timestamp, input_freq, input_trip_temperature, throttling_type)</div><div class="ttdoc">Apply throttling if the temperature exceeds the trip points.</div><div class="ttdef"><b>Definition:</b> <a href="_d_t_p_m__power__models_8py_source.html#l00234">DTPM_power_models.py:234</a></div></div>
<div class="ttc" id="anamespace_d_t_p_m__power__models_html_aa13ff06bd0c93b4d1526f2e828159774"><div class="ttname"><a href="namespace_d_t_p_m__power__models.html#aa13ff06bd0c93b4d1526f2e828159774">DTPM_power_models.get_min_voltage</a></div><div class="ttdeci">def get_min_voltage(OPP_list)</div><div class="ttdoc">Get the minimum voltage of a cluster.</div><div class="ttdef"><b>Definition:</b> <a href="_d_t_p_m__power__models_8py_source.html#l00359">DTPM_power_models.py:359</a></div></div>
<div class="ttc" id="anamespace_d_t_p_m__power__models_html_a33aef80593b650e23f5b1f79dd878e4a"><div class="ttname"><a href="namespace_d_t_p_m__power__models.html#a33aef80593b650e23f5b1f79dd878e4a">DTPM_power_models.compute_Cdyn_and_alpha</a></div><div class="ttdeci">def compute_Cdyn_and_alpha(resource, max_power_consumption, freq_threshold, OPP=None)</div><div class="ttdoc">Based on the maximum frequency, voltage, and measured power dissipation, compute the capacitance C ti...</div><div class="ttdef"><b>Definition:</b> <a href="_d_t_p_m__power__models_8py_source.html#l00073">DTPM_power_models.py:73</a></div></div>
<div class="ttc" id="anamespace_d_t_p_m__power__models_html_abd99e7ecc4a5cea6d0c1184e512b7424"><div class="ttname"><a href="namespace_d_t_p_m__power__models.html#abd99e7ecc4a5cea6d0c1184e512b7424">DTPM_power_models.get_voltage_constant_mode</a></div><div class="ttdeci">def get_voltage_constant_mode(OPP_list, constantFrequency)</div><div class="ttdoc">Get the voltage of the OPP that satisfies the defined constant frequency.</div><div class="ttdef"><b>Definition:</b> <a href="_d_t_p_m__power__models_8py_source.html#l00300">DTPM_power_models.py:300</a></div></div>
<div class="ttc" id="anamespace_d_t_p_m__power__models_html_af9a1bf09d01c4c70fd45f0ae6a7eaf79"><div class="ttname"><a href="namespace_d_t_p_m__power__models.html#af9a1bf09d01c4c70fd45f0ae6a7eaf79">DTPM_power_models.increase_frequency_all_PEs</a></div><div class="ttdeci">def increase_frequency_all_PEs(current_frequency_list)</div><div class="ttdoc">Increase the frequency of all PEs by one step (based on the respective defined OPPs).</div><div class="ttdef"><b>Definition:</b> <a href="_d_t_p_m__power__models_8py_source.html#l00440">DTPM_power_models.py:440</a></div></div>
<div class="ttc" id="anamespace_d_t_p_m__power__models_html_a50fcd4b71d45df63ad2157b278805406"><div class="ttname"><a href="namespace_d_t_p_m__power__models.html#a50fcd4b71d45df63ad2157b278805406">DTPM_power_models.set_max_frequency</a></div><div class="ttdeci">def set_max_frequency(cluster, timestamp)</div><div class="ttdoc">Set the maximum frequency for the current cluster.</div><div class="ttdef"><b>Definition:</b> <a href="_d_t_p_m__power__models_8py_source.html#l00482">DTPM_power_models.py:482</a></div></div>
<div class="ttc" id="anamespace_d_t_p_m__power__models_html_a9842c48a1a666626749170428c3ac8eb"><div class="ttname"><a href="namespace_d_t_p_m__power__models.html#a9842c48a1a666626749170428c3ac8eb">DTPM_power_models.get_voltage_in_V</a></div><div class="ttdeci">def get_voltage_in_V(voltage_mV)</div><div class="ttdoc">Convert voltage from mV to V.</div><div class="ttdef"><b>Definition:</b> <a href="_d_t_p_m__power__models_8py_source.html#l00381">DTPM_power_models.py:381</a></div></div>
<div class="ttc" id="anamespace_d_t_p_m__power__models_html_a4d89e060febe70c6530778af408c2ca3"><div class="ttname"><a href="namespace_d_t_p_m__power__models.html#a4d89e060febe70c6530778af408c2ca3">DTPM_power_models.compute_DVFS_performance_slowdown</a></div><div class="ttdeci">def compute_DVFS_performance_slowdown(cluster)</div><div class="ttdoc">Compute the slowdown from running a given task with lower frequency.</div><div class="ttdef"><b>Definition:</b> <a href="_d_t_p_m__power__models_8py_source.html#l00058">DTPM_power_models.py:58</a></div></div>
<div class="ttc" id="anamespace_d_t_p_m__power__models_html_a5259c127be3d9cc6cc3cbdac95a98be0"><div class="ttname"><a href="namespace_d_t_p_m__power__models.html#a5259c127be3d9cc6cc3cbdac95a98be0">DTPM_power_models.initialize_B_model</a></div><div class="ttdeci">def initialize_B_model()</div><div class="ttdoc">Initialize the B_model matrix, used in the temperature prediction.</div><div class="ttdef"><b>Definition:</b> <a href="_d_t_p_m__power__models_8py_source.html#l00201">DTPM_power_models.py:201</a></div></div>
<div class="ttc" id="anamespace_d_t_p_m__power__models_html_af8b8111dffef911ea6338fe31fb371c8"><div class="ttname"><a href="namespace_d_t_p_m__power__models.html#af8b8111dffef911ea6338fe31fb371c8">DTPM_power_models.compute_static_power_dissipation</a></div><div class="ttdeci">def compute_static_power_dissipation(cluster_ID, input_temperature=None, input_voltage=None)</div><div class="ttdoc">Compute the static power dissipation of the PE.</div><div class="ttdef"><b>Definition:</b> <a href="_d_t_p_m__power__models_8py_source.html#l00099">DTPM_power_models.py:99</a></div></div>
<div class="ttc" id="anamespace_d_t_p_m__power__models_html_a397e3796e3ba35a4e85ec8950a1cd1f4"><div class="ttname"><a href="namespace_d_t_p_m__power__models.html#a397e3796e3ba35a4e85ec8950a1cd1f4">DTPM_power_models.decrease_frequency</a></div><div class="ttdeci">def decrease_frequency(cluster, timestamp)</div><div class="ttdoc">Decrease the frequency by one step (based on the defined OPPs).</div><div class="ttdef"><b>Definition:</b> <a href="_d_t_p_m__power__models_8py_source.html#l00390">DTPM_power_models.py:390</a></div></div>
<div class="ttc" id="anamespace_d_t_p_m__power__models_html_a7a8c48822db8400738a6ca192d153c14"><div class="ttname"><a href="namespace_d_t_p_m__power__models.html#a7a8c48822db8400738a6ca192d153c14">DTPM_power_models.predict_temperature</a></div><div class="ttdeci">def predict_temperature()</div><div class="ttdoc">Predict the temperature based on the current status of the clusters.</div><div class="ttdef"><b>Definition:</b> <a href="_d_t_p_m__power__models_8py_source.html#l00217">DTPM_power_models.py:217</a></div></div>
<div class="ttc" id="anamespace_d_t_p_m__power__models_html_aa395bf114a31df88ad5f3e7513b8a08e"><div class="ttname"><a href="namespace_d_t_p_m__power__models.html#aa395bf114a31df88ad5f3e7513b8a08e">DTPM_power_models.get_max_power_consumption</a></div><div class="ttdeci">def get_max_power_consumption(cluster, PEs, N_tasks=None, N_cores=None)</div><div class="ttdoc">Get the power consumption of the current PE.</div><div class="ttdef"><b>Definition:</b> <a href="_d_t_p_m__power__models_8py_source.html#l00169">DTPM_power_models.py:169</a></div></div>
<div class="ttc" id="anamespace_d_t_p_m__power__models_html_a873a9de6e0fcfedd71d08f990d15b540"><div class="ttname"><a href="namespace_d_t_p_m__power__models.html#a873a9de6e0fcfedd71d08f990d15b540">DTPM_power_models.get_max_voltage</a></div><div class="ttdeci">def get_max_voltage(OPP_list)</div><div class="ttdoc">Get the maximum voltage of a cluster.</div><div class="ttdef"><b>Definition:</b> <a href="_d_t_p_m__power__models_8py_source.html#l00346">DTPM_power_models.py:346</a></div></div>
<div class="ttc" id="anamespace_d_t_p_m__power__models_html_af43bd1deddf711c2f85f1256bfd94a55"><div class="ttname"><a href="namespace_d_t_p_m__power__models.html#af43bd1deddf711c2f85f1256bfd94a55">DTPM_power_models.get_min_freq</a></div><div class="ttdeci">def get_min_freq(OPP_list)</div><div class="ttdoc">Get the minimum frequency of a cluster.</div><div class="ttdef"><b>Definition:</b> <a href="_d_t_p_m__power__models_8py_source.html#l00333">DTPM_power_models.py:333</a></div></div>
<div class="ttc" id="anamespace_d_t_p_m__power__models_html_a61dbb4db911c289b4aa9f0a0b53d4bbf"><div class="ttname"><a href="namespace_d_t_p_m__power__models.html#a61dbb4db911c289b4aa9f0a0b53d4bbf">DTPM_power_models.keep_frequency</a></div><div class="ttdeci">def keep_frequency(cluster, timestamp)</div><div class="ttdoc">Keep the same frequency for the current cluster.</div><div class="ttdef"><b>Definition:</b> <a href="_d_t_p_m__power__models_8py_source.html#l00496">DTPM_power_models.py:496</a></div></div>
<div class="ttc" id="anamespace_d_t_p_m__power__models_html_aa11002bad841d75c7b45eb700c5ed18a"><div class="ttname"><a href="namespace_d_t_p_m__power__models.html#aa11002bad841d75c7b45eb700c5ed18a">DTPM_power_models.get_execution_time_max_frequency</a></div><div class="ttdeci">def get_execution_time_max_frequency(task, resource)</div><div class="ttdoc">Get the execution time of the current task if it was running at maximum frequency and considering the...</div><div class="ttdef"><b>Definition:</b> <a href="_d_t_p_m__power__models_8py_source.html#l00140">DTPM_power_models.py:140</a></div></div>
<div class="ttc" id="anamespace_d_a_s_h___sim__utils_html_a99aab56376ce5ff66032d442e5a09b46"><div class="ttname"><a href="namespace_d_a_s_h___sim__utils.html#a99aab56376ce5ff66032d442e5a09b46">DASH_Sim_utils.get_num_tasks_being_executed</a></div><div class="ttdeci">def get_num_tasks_being_executed(cluster, PEs)</div><div class="ttdoc">Get the number of tasks that are being executed.</div><div class="ttdef"><b>Definition:</b> <a href="_d_a_s_h___sim__utils_8py_source.html#l00218">DASH_Sim_utils.py:218</a></div></div>
<div class="ttc" id="anamespace_d_t_p_m__power__models_html_afb7e529058dd98d91b864921cf43539a"><div class="ttname"><a href="namespace_d_t_p_m__power__models.html#afb7e529058dd98d91b864921cf43539a">DTPM_power_models.set_active_cores</a></div><div class="ttdeci">def set_active_cores(cluster, PEs, num_cores)</div><div class="ttdoc">Set a given number of cores to the current cluster.</div><div class="ttdef"><b>Definition:</b> <a href="_d_t_p_m__power__models_8py_source.html#l00530">DTPM_power_models.py:530</a></div></div>
<div class="ttc" id="anamespace_d_t_p_m__power__models_html_a48124965f0c4bbd3cf98990f4ad9808c"><div class="ttname"><a href="namespace_d_t_p_m__power__models.html#a48124965f0c4bbd3cf98990f4ad9808c">DTPM_power_models.get_max_freq</a></div><div class="ttdeci">def get_max_freq(OPP_list)</div><div class="ttdoc">Get the maximum frequency of a cluster.</div><div class="ttdef"><b>Definition:</b> <a href="_d_t_p_m__power__models_8py_source.html#l00320">DTPM_power_models.py:320</a></div></div>
<div class="ttc" id="anamespace_d_t_p_m__power__models_html_adb5634ffab786397bb10c2c5e14558b7"><div class="ttname"><a href="namespace_d_t_p_m__power__models.html#adb5634ffab786397bb10c2c5e14558b7">DTPM_power_models.increase_frequency</a></div><div class="ttdeci">def increase_frequency(cluster, timestamp)</div><div class="ttdoc">Increase the frequency by one step (based on the defined OPPs).</div><div class="ttdef"><b>Definition:</b> <a href="_d_t_p_m__power__models_8py_source.html#l00415">DTPM_power_models.py:415</a></div></div>
<div class="ttc" id="anamespace_d_t_p_m__power__models_html_a72eb1a0883aa9da4fab60acadd6b13dd"><div class="ttname"><a href="namespace_d_t_p_m__power__models.html#a72eb1a0883aa9da4fab60acadd6b13dd">DTPM_power_models.get_frequency_in_Hz</a></div><div class="ttdeci">def get_frequency_in_Hz(frequency_MHz)</div><div class="ttdoc">Convert frequency from MHz to Hz.</div><div class="ttdef"><b>Definition:</b> <a href="_d_t_p_m__power__models_8py_source.html#l00372">DTPM_power_models.py:372</a></div></div>
<div class="ttc" id="anamespace_d_t_p_m__power__models_html_a94089a6a0f58f9fe8f950adb500f8028"><div class="ttname"><a href="namespace_d_t_p_m__power__models.html#a94089a6a0f58f9fe8f950adb500f8028">DTPM_power_models.set_frequency</a></div><div class="ttdeci">def set_frequency(timestamp, frequency_list, throttling)</div><div class="ttdoc">Set a given frequency to the respective clusters.</div><div class="ttdef"><b>Definition:</b> <a href="_d_t_p_m__power__models_8py_source.html#l00509">DTPM_power_models.py:509</a></div></div>
<div class="ttc" id="anamespace_d_t_p_m__power__models_html_a745d2c5771fd1b2bda1ef599bdc2b362"><div class="ttname"><a href="namespace_d_t_p_m__power__models.html#a745d2c5771fd1b2bda1ef599bdc2b362">DTPM_power_models.compute_dynamic_power_dissipation</a></div><div class="ttdeci">def compute_dynamic_power_dissipation(current_frequency, current_voltage, Cdyn_alpha)</div><div class="ttdoc">Compute the dynamic power dissipation for the current task based on the current state of the PE.</div><div class="ttdef"><b>Definition:</b> <a href="_d_t_p_m__power__models_8py_source.html#l00126">DTPM_power_models.py:126</a></div></div>
<div class="ttc" id="anamespace_d_t_p_m__power__models_html_a14d88f3a20ec782ca5f12ca5bd1ef8fb"><div class="ttname"><a href="namespace_d_t_p_m__power__models.html#a14d88f3a20ec782ca5f12ca5bd1ef8fb">DTPM_power_models.increase_num_cores_all_PEs</a></div><div class="ttdeci">def increase_num_cores_all_PEs(current_num_cores)</div><div class="ttdoc">Increase the number of active cores by one (based on the respective cluster capacities).</div><div class="ttdef"><b>Definition:</b> <a href="_d_t_p_m__power__models_8py_source.html#l00466">DTPM_power_models.py:466</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="_d_t_p_m__power__models_8py.html">DTPM_power_models.py</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
